<head lang="{{- .Site.LanguageCode -}}">
    <meta charset="utf-8" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="canonical" href="{{- .Permalink | safeURL -}}" />
    <!--seo-->
    {{- partial "head/seo" . -}}
    <!-- rss -->
    {{- with .OutputFormats.Get "rss" -}}
    {{- printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .Permalink site.Title | safeHTML -}}
    {{- end -}}
    {{- partial "head/favicon" . -}}
    <!-- style -->
    {{- $css := resources.Get "scss/style.scss" -}}
    {{- if site.Params.fingerprint -}}
    {{- $style := $css | resources.ToCSS | minify | resources.Fingerprint "sha256" -}}
    <link rel="stylesheet" href="{{- $style.RelPermalink | safeURL -}}" integrity="{{- $style.Data.Integrity -}}" crossorigin="same-site" rel="preload stylesheet" as="style">
    {{- else -}}
    {{- $nofp := $css | resources.ToCSS | minify -}}
    <link rel="stylesheet" href="{{- $nofp.RelPermalink | safeURL -}}" crossorigin="same-site" rel="preload stylesheet" as="style">
    {{- end -}}
    {{- if hugo.IsProduction -}}
    {{- template "_internal/schema.html" . -}}
    {{- template "_internal/opengraph.html" . -}}
    {{- partial "head/schema" . -}}
    {{- end -}}
    {{- with site.Params.plausible -}}
    {{- $src := .src -}}
    {{- $plausible := resources.GetRemote $src | js.Build "js/src/plausible.js" | resources.Fingerprint "sha512" -}}
    <script id="plausible" defer data-domain="{{- .domain -}}" src="{{- $plausible -}}" integrity="{{- $plausible.Data.Integrity -}}"></script>
    {{- end -}}
    
    <noscript>
        <style>
            #darkmode {
                display: none;
            }
        </style>
    </noscript>
</head>
