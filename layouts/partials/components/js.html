{{- if .Site.Params.enablejs -}}

{{- $d := site.Params.addon.darkmode -}}
{{- $c := site.Params.addon.copybutton -}}
{{- $copy := findRE "<pre" .Content 1 -}}
{{- $darkmode := resources.Get "js/darkmode.js" -}}
{{- $clipboard := resources.Get "js/clipboard.js" -}}
{{- $bundle := slice $darkmode $clipboard | resources.Concat "js/bundle.js" -}}
{{- $darkmodep := $darkmode | minify | babel -}}
{{- $bundlep := $bundle | minify | babel -}}

{{- if and $c $d $copy}}
<script crossorigin="anonymous" defer src="{{- if hugo.IsProduction -}}{{- $bundlep.RelPermalink -}}{{- else -}}{{- $bundle.RelPermalink }}{{- end -}}"></script>
{{- else -}}{{- if and $d (not $copy) -}}
<script crossorigin="anonymous" defer src="{{- if hugo.IsProduction -}}{{- $darkmodep.RelPermalink -}}{{- else -}}{{- $darkmode.RelPermalink }}{{- end -}}"></script>
{{- end -}}
{{- end -}}


{{- end -}}



