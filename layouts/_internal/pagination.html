{{- $paginator := .Paginator -}}
{{- $adjacent_links := 2 -}}
{{- $max_links := (add (mul $adjacent_links 2) 1) -}}
{{- $lower_limit := (add $adjacent_links 1) -}}
{{- $upper_limit := (sub $paginator.TotalPages $adjacent_links) -}}
{{- if gt $paginator.TotalPages 1 -}}
  <ul class="pagination"> 
    {{- if ne $paginator.PageNumber 1 -}}
    <li class="pagination-first">
      <a class="pagination-first-link" href="{{- $paginator.First.URL -}}">&laquo;</a>
    </li>
    {{- end -}}
    {{- if $paginator.HasPrev -}}
    <li class="pagination-previous">
      <a class="pagination-previous-link" href="{{- $paginator.Prev.URL -}}">&#x2039;</a>
    </li>
    {{- end -}}
    {{- range $paginator.Pagers -}}    
      {{- $.Scratch.Set "page_number_flag" false -}}
      {{- if gt $paginator.TotalPages $max_links -}}
        {{- if le $paginator.PageNumber $lower_limit -}}
          {{- if le .PageNumber $max_links -}}
            {{- $.Scratch.Set "page_number_flag" true -}}
          {{- end -}}
        {{- else if ge $paginator.PageNumber $upper_limit -}}
          {{- if gt .PageNumber (sub $paginator.TotalPages $max_links) -}}
            {{- $.Scratch.Set "page_number_flag" true -}}
          {{- end -}}
        {{- else -}}          
          {{- if and ( ge .PageNumber (sub $paginator.PageNumber $adjacent_links) ) ( le .PageNumber (add $paginator.PageNumber $adjacent_links) ) -}}
            {{- $.Scratch.Set "page_number_flag" true -}}
          {{- end -}}
        {{- end -}}
      {{- else -}}
        {{- $.Scratch.Set "page_number_flag" true -}}
      {{- end -}}
      {{- if eq ($.Scratch.Get "page_number_flag") true -}}
        <li class="pagination-item{{- if eq . $paginator -}}-current{{- end -}}">
          <a class="pagination-item-link{{- if eq . $paginator -}}-current{{- end -}}" href="{{- .URL -}}">
            {{- .PageNumber -}}
          </a>
        </li>
      {{- end -}}
    {{- end -}}
    {{- if $paginator.HasNext -}}
    <li class="pagination-next">
      <a class="pagination-next-link" href="{{- $paginator.Next.URL -}}" >&#x203a;</a>
    </li>
    {{- end -}}
    {{- if ne $paginator.PageNumber $paginator.TotalPages -}}
    <li class="pagination-last">
      <a class="pagination-last-link" href="{{- $paginator.Last.URL -}}">&raquo;</a>
    </li>
    {{- end -}}
  </ul>
{{- end -}}
